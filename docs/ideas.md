# Scensei - 今後の実装アイデア

## 現在の状態

Phase 1-8 完了。AgentCore バックエンド（Memory / Gateway / Identity）構築済み。
Web検索ツール（Tavily）統合済み。プリセット質問ボタン実装済み。

---

## カメラ連携（視覚機能）

エージェントに「目」を与え、ユーザーの見た目や周囲の状況に基づいた提案を可能にする。

- ユーザーの服装を見てマッチする香水を提案
- 香水ボトルの写真から銘柄を特定
- TPO（場の雰囲気）に合わせた提案
- 参考: [Open-LLM-VTuber](https://github.com/Open-LLM-VTuber/Open-LLM-VTuber) の visual perception 実装

### 実装パターン案

| パターン | 概要 | コスト |
|---------|------|--------|
| スナップショット型 | ボタン押下でカメラ画像を1枚送信 | 低 |
| 定期キャプチャ型 | 数秒おきに自動キャプチャ | 中 |
| リアルタイム型 | 映像ストリームを常時分析 | 高 |

### 技術要素

- フロント: WebRTC / getUserMedia でカメラアクセス
- バックエンド: Claude Vision API（マルチモーダル入力）で画像分析
- 最初はスナップショット型から始めるのが現実的

---

## Web検索プロンプトの改善

現在のTavily Web検索は動作しているが、プロンプトの調整余地あり。

- 検索クエリの精度向上（日本語/英語の使い分け）
- 検索結果の要約・フィルタリング指示の精緻化
- search_perfumes とのフォールバック判断基準の明確化
- 検索結果の引用方法（URL表示するかどうか等）

---

## Text-to-Speech（音声出力）

エージェントの応答を音声で読み上げ、VRMアバターの口の動きと連動させる。

- TTS候補: Amazon Polly / VOICEVOX / ElevenLabs / Style-Bert-VITS2
- VRMリップシンクを音声ベース（音素同期）に切り替え（現在はテキストベース）
- 感情タグ（happy/sad等）と連動した声色・トーンの切り替え
- ストリーミング再生対応（応答を待たず順次再生）

---

## パフォーマンストレース

エージェントの応答品質とレイテンシを可視化・改善するための計測基盤。

- AgentCore Observability（CloudWatch + X-Ray）の活用
- エンドツーエンドのレイテンシ計測（ユーザー送信 → 応答表示）
- ツール呼び出しごとの所要時間（search_perfumes / TavilySearch）
- LLM推論時間 vs ツール呼び出し時間の内訳分析
- コスト追跡（トークン消費量、API呼び出し回数）
- GenAI Observability Dashboard の活用

---

## 音声入力

音声でエージェントに話しかけられるようにする。

- Web Speech API or Whisper
- マイクボタンのUI追加
- リアルタイム文字起こし → テキストとして送信

---

## 技術的負債の解消

旧 `docs/bk/backlog.md` から引き継ぎ。優先度の高いもの:

- TTS関連APIエンドポイントの削除（11ファイル残存）
- 削除済みタブのAPIエンドポイント残存（スライド/画像系）
- 漢字のリップシンク改善（kuromoji.js 導入検討）
- CORS設定の制限（ALL_ORIGINS → 特定オリジンに）
- Gateway URLのハードコード → config化
- バックエンドのユニットテスト追加
- 依存パッケージの脆弱性対応

---

## 個人汎用AIエージェントへの進化（長期ビジョン）

現在は香水ソムリエ特化だが、将来的には個人の汎用AIエージェントへ拡張していく。
Scenseiで培ったアーキテクチャ（AgentCore + Memory + Gateway + VRM）を基盤に、
香水以外のドメインにも対応できる「自分専用のAIパートナー」を目指す。

### 拡張の方向性

- 香水ソムリエの知識はそのまま維持しつつ、汎用的な相談にも対応
- Gateway にツールを追加していくことで能力を拡張（カレンダー、メール、タスク管理等）
- Memory で個人の好み・習慣・履歴を蓄積し、パーソナライズを深化
- キャラクター性（VRMアバター + 性格）は維持しつつ、対応範囲を広げる

### 必要になりそうな要素

- マルチドメイン対応のシステムプロンプト設計（モード切替 or 統合型）
- 外部サービス連携の拡充（Google Calendar / Notion / Slack 等）
- ユーザー認証の本格導入（個人データの安全な管理）
- モバイルアプリ化（PWA or ネイティブ）
- プラグイン的なツール追加の仕組み

---

## その他のアイデア

- 香水データベースの拡充（現在のDynamoDBレビューデータの追加）
- ユーザー認証（ログインして好みを保存）
- 香水の画像表示（提案時にボトル画像を表示）
- おすすめ香水のランキング機能
- 季節やトレンドに基づく自動おすすめ更新
